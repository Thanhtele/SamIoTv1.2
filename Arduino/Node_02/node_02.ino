#include <RF24Network.h>
#include <RF24.h>
#include <SPI.h>
#include <IRremote.h>
#include <avr/pgmspace.h>
#include <dht.h>

int RECV_PIN = 4;
IRrecv irrecv(RECV_PIN);
IRsend irsend;
decode_results results;

dht DHT;
#define DHT11_PIN 5

RF24 radio(10, 9);               // nRF24L01 (CE,CSN)
RF24Network network(radio);      // Include the radio in the network
const uint16_t this_node = 02;   // Address of our node in Octal format ( 04,031, etc)
const uint16_t master = 00;    // Address of the other node in Octal format
uint16_t rfData[6]={};

unsigned long codeValue; // The code value if not raw
unsigned int rawCodes[250]; // The durations if raw
int codeLen; // The length of the code
const PROGMEM unsigned int Off[211]={8800,4600,400,1800,450,1750,450,650,450,700,400,700,400,650,450,1800,450,1750,450,1800,450,1750,450,1800,450,1750,450,1800,450,1750,450,1800,450,650,450,650,450,650,450,650,450,650,400,700,400,1800,450,1800,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,700,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,400,700,400,700,400,700,400,700,400,700,400,1850,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,400,700,450,650,450,650,450,650,450,650,450,650,450,650,400,700,400,700,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,400,700,400,700,400,700,400,700,400,700,400,1850,350,700,400,1850,400,700,400,700,400,700,400,700,400,700,400,1800,400,1850,400,1800,400,700,400,700,450,1800,400,1800,400,1850,400},
                  On[211]={8850,4550,450,1800,400,1800,450,650,450,650,450,650,450,650,450,1800,400,1800,400,1800,450,1800,400,1850,400,1800,400,1800,450,1800,400,1800,450,700,400,650,450,650,450,700,400,650,450,650,450,1800,400,1850,400,1800,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,650,450,650,450,650,450,650,450,650,450,1800,400,700,400,1800,450,650,450,700,400,700,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,700,400,700,450,650,450,650,400,700,400,700,450,650,400,700,400,700,400,700,400,700,400,650,450,700,400,650,450,650,450,650,450,700,400,650,450,650,450,650,450,650,450,700,400,650,450,1800,400,700,400,700,400,700,450,650,400,700,400,700,450,650,450,650,400,700,450,650,450,1750,450,650,450,1800,450,650,450,650,450,650,450,650,450,650,450,1750,450,1800,400,1800,450,650,450,650,450,650,450,650,450,650,450},
                  Tempt16[211]={8800,4550,450,1800,400,1800,450,650,450,650,450,650,450,650,450,1800,450,1750,450,1750,500,1750,450,1800,400,700,400,700,400,650,500,1750,400,700,400,650,500,650,450,650,450,650,400,700,400,1800,450,1800,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,400,1800,450,700,400,1800,450,650,450,650,450,650,400,700,450,650,450,650,400,700,450,650,450,650,450,650,450,650,450,650,450,650,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,500,600,450,650,450,650,450,650,450,650,400,700,400,700,400,700,450,650,450,650,450,650,400,700,450,1750,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,450,650,400,700,450,650,450,650,450,650,450,650,450,650,450,1750,450,1800,400,700,400,1800,450,650,450,650,400,1800,450,1800,450},
                  Tempt17[211]={8850,4550,450,1800,400,1800,400,700,400,700,400,700,400,700,400,1800,450,1800,400,1800,450,1750,450,1800,450,1750,450,700,400,700,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,1750,450,1800,450,1750,450,700,400,700,400,700,400,700,400,700,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1750,450,700,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1750,450,700,400,700,400,700,400,700,400,650,450,700,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,700,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1750,450,650,450,650,450,1800,450,650,450,1750,450,1800,400},
                  Tempt18[211]={8800,4600,350,1850,400,1850,350,750,350,750,350,750,350,750,350,1850,400,1850,350,1850,400,1850,350,1850,400,700,400,1800,400,700,400,1850,400,700,400,700,400,650,450,700,400,700,400,700,400,1800,400,1850,350,1850,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,1850,350,750,350,1850,400,650,450,650,450,700,400,700,400,700,400,700,400,650,450,650,450,650,450,650,450,700,400,650,450,650,450,1800,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,350,750,350,750,400,700,400,700,350,750,400,700,400,700,400,700,400,700,350,750,400,650,400,700,400,700,400,700,400,700,400,1800,450,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,350,750,400,700,350,750,350,750,350,750,350,1850,400,700,400,1800,400,1850,400,700,400,1800,400,1850,400},
                  Tempt19[211]={8800,4600,400,1800,450,1800,400,700,400,700,400,700,400,650,450,1800,450,1750,450,1800,450,1800,400,1800,450,1750,450,1800,450,650,450,1800,400,700,400,650,450,700,400,650,450,650,450,650,450,1800,400,1800,450,1750,450,650,450,700,400,650,450,700,400,650,450,700,400,650,450,650,450,650,450,700,400,650,450,650,450,650,450,1800,450,600,500,1750,450,700,400,650,450,650,450,650,450,700,400,650,450,700,400,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,650,450,650,450,700,400,650,450,650,450,650,450,650,450,650,450,700,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,700,400,650,450,650,450,650,450,650,450,700,400,650,450,1800,400,700,400,700,400,650,450,700,400,650,450,700,400,650,450,700,400,650,450,700,400,650,450,700,400,650,450,700,400,650,450,650,450,650,450,650,450,650,450,1800,450,650,450,650,450,650,450,1750,450,1800,450,1800,400},
                  Tempt20[211]={8800,4550,450,1800,450,1800,400,650,450,650,450,650,450,700,400,1800,450,1800,400,1800,450,1800,400,1800,400,700,400,700,400,1850,400,1800,400,650,450,650,450,650,450,700,400,650,450,700,400,1800,450,1800,400,1800,450,650,450,650,450,650,450,650,450,650,450,600,500,650,450,600,500,650,450,650,450,600,500,650,450,650,450,1800,400,700,400,1800,400,700,400,700,400,700,400,700,400,700,400,700,400,650,450,700,400,700,400,650,450,650,450,700,400,650,450,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,400,700,400,700,400,700,400,700,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1750,450,700,400,1800,450,650,450,1750,450,1800,450,1800,400},
                  Tempt21[211]={8800,4600,400,1850,350,1850,400,700,400,700,400,700,400,700,400,1850,350,1800,450,1800,400,1800,450,1800,400,1850,400,650,450,1800,400,1800,450,650,450,650,450,700,400,650,450,650,450,650,450,1800,400,1850,400,1800,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,650,450,700,400,1800,400,700,400,1850,400,650,450,700,400,700,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,700,400,1800,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,650,450,650,450,650,450,650,450,700,400,650,450,700,400,650,450,700,400,1800,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,450,650,400,1800,450,650,450,650,450,1800,400,1800,400,1800,450,1800,400},
                  Tempt22[211]={8800,4600,400,1800,450,1800,400,700,400,700,400,700,400,700,400,1800,450,1800,400,1850,400,1800,400,1850,400,650,450,1800,400,1800,450,1800,400,700,400,700,400,700,400,700,400,700,400,700,400,1850,350,1850,400,1800,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,1800,450,650,450,1800,400,700,400,700,400,650,450,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,1800,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,700,400,650,450,650,450,700,400,650,450,700,350,700,450,650,400,700,400,700,400,700,400,700,450,650,400,1800,450,650,450,1800,450,1750,450,1800,400,1800,450,1800,400},
                  Tempt23[211]={8750,4600,400,1850,400,1800,400,700,400,700,400,700,400,700,400,1850,400,1800,400,1850,400,1800,400,1850,400,1800,400,1850,350,1850,400,1850,350,750,350,750,350,750,350,750,350,750,350,750,350,1850,400,1800,400,1850,400,700,400,700,400,700,400,700,400,650,450,650,450,650,450,700,400,700,400,650,450,700,400,700,350,750,350,1850,400,700,400,1800,400,750,350,700,400,700,400,700,400,700,400,700,400,750,350,700,400,700,400,700,400,700,400,700,400,700,400,1800,450,650,450,650,400,700,400,700,450,650,450,650,400,700,400,700,450,650,400,700,450,650,400,700,400,700,400,700,400,700,450,650,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,1850,350,750,350,750,350,750,350,750,350,750,350,750,350,750,350,750,350,750,350,750,350,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,1850,400,700,400,700,400,700,400,700,400,700,400,700,400},
                  Tempt24[211]={8850,4550,400,1800,400,1800,450,650,450,700,400,650,450,650,450,1800,400,1800,450,1800,450,1750,450,1800,450,650,450,650,400,700,400,700,400,1800,450,650,450,650,450,650,450,650,450,650,450,1800,400,1800,450,1800,400,700,450,650,400,700,400,700,400,650,450,700,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,700,400,1800,450,650,450,650,450,650,450,700,400,650,450,650,450,650,450,650,450,650,450,650,450,700,400,650,450,700,400,1800,450,650,400,700,400,700,400,700,400,700,400,700,450,650,450,650,400,700,400,700,400,700,400,700,400,650,450,650,450,700,400,650,450,650,450,700,400,650,450,650,450,650,450,650,450,650,450,1800,450,650,400,700,450,650,450,650,450,650,450,650,450,650,400,700,450,650,400,700,450,650,400,700,450,650,450,650,450,650,450,650,450,650,450,650,450,650,400,1800,450,650,450,1800,450,650,450,650,400,700,400,700,400},
                  Tempt25[211]={8800,4600,400,1800,450,1800,400,700,400,700,400,700,400,700,400,1800,400,1800,450,1800,400,1850,400,1800,400,1850,400,650,450,650,450,650,450,1800,400,700,400,700,400,700,400,700,400,700,400,1850,400,1800,400,1800,450,650,450,650,450,700,400,650,400,750,400,650,450,650,450,650,450,700,400,650,450,650,450,650,450,650,400,1850,400,650,450,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,600,500,650,450,650,450,650,450,650,450,650,450,650,450,1750,450,650,450,650,450,650,450,650,450,650,450,700,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,700,400,650,450,650,450,650,450,650,400,700,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,700,400,700,400,1800,450,650,450,650,450,650,450},
                  Tempt26[211]={8800,4600,400,1800,400,1800,450,650,450,650,450,700,400,650,450,1800,400,1850,400,1800,400,1850,400,1800,400,700,400,1850,400,700,400,700,400,1800,400,700,400,700,400,700,400,700,400,700,400,1800,450,1800,400,1800,450,650,400,700,450,650,450,650,400,700,400,700,400,650,500,650,450,650,450,650,400,700,400,700,400,700,400,1800,450,700,400,1800,450,650,400,700,450,650,450,650,400,700,400,700,400,700,450,650,400,700,400,700,400,700,400,700,400,700,400,1800,400,700,400,700,400,700,400,700,400,700,400,650,450,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,700,400,1800,450,650,450,650,450,650,450,700,400,650,450,700,400,650,450,650,450,650,450,650,400,700,400,700,400,750,400,650,450,650,400,700,400,700,400,700,400,700,450,1750,450,650,450,1800,450,1750,450,650,450,700,400,650,450},
                  Tempt27[211]={8800,4550,450,1800,400,1800,450,650,450,600,450,700,400,700,400,1850,400,1750,450,1850,400,1800,400,1800,450,1750,450,1850,400,650,450,700,400,1800,400,700,400,700,400,700,400,700,400,700,400,1800,450,1800,400,1850,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,400,700,400,700,400,700,400,700,400,1800,450,650,450,1800,450,650,400,700,450,650,400,700,400,700,400,700,400,700,450,650,400,700,400,700,400,700,400,700,450,650,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,700,400,650,400,750,400,650,400,700,400,700,400,700,450,650,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,450,650,450,650,450,650,450,1750,450,650,450,650,450},
                  Tempt28[211]={8800,4600,450,1750,450,1750,500,650,400,700,450,650,450,650,400,1800,450,1800,400,1800,500,1700,450,1800,450,650,450,650,450,1750,450,650,450,1800,450,650,450,650,450,650,450,650,400,700,400,1800,450,1750,450,1800,450,650,450,650,500,600,500,600,450,650,450,650,450,650,450,650,450,650,450,650,500,600,500,600,400,700,400,1800,450,650,500,1750,450,650,400,700,450,650,400,700,400,700,400,700,400,700,400,700,400,700,450,650,400,700,400,700,400,700,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,400,700,400,700,400,700,400,700,400,700,400,700,450,650,450,650,400,700,450,1750,500,600,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,700,400,1800,450,650,450,1800,400,700,400,700,400},
                  Tempt29[211]={8850,4550,500,1750,450,1750,500,650,400,700,450,650,450,650,450,1750,450,1800,400,1800,400,1800,500,1750,450,1750,450,650,450,1800,450,650,450,1750,450,650,450,650,450,650,450,650,450,650,450,1800,400,1800,450,1750,500,650,400,700,400,700,450,650,400,700,400,700,400,650,450,650,450,650,450,650,450,650,500,600,450,650,450,1800,400,700,450,1750,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,700,400,700,450,650,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,450,650,450,650,450,650,450,650,400,700,400,700,450,650,450,650,400,700,400,650,450,700,400,700,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,700,400,700,400,1800,450,1800,400,700,400,700,400},
                  Tempt30[211]={8800,4550,450,1800,400,1800,450,650,450,650,450,650,450,650,500,1750,450,1750,450,1800,450,1750,450,1800,450,650,400,1800,450,1800,450,650,400,1800,450,650,450,650,400,700,400,700,400,700,400,1850,400,1800,400,1800,450,650,450,650,450,650,450,650,500,600,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,700,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,700,400,700,400,700,450,600,500,650,450,650,450,650,400,700,400,700,400,700,400,700,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,500,1750,450,650,400,1800,450,1800,450,1750,450,650,450,650,450},
                  Tempt31[211]={8850,4550,450,1800,450,1750,450,650,450,650,450,650,450,650,450,1750,500,1750,450,1800,400,1800,450,1750,450,1750,450,1800,450,1800,400,700,450,1750,450,650,450,650,450,650,450,650,450,650,450,1750,500,1750,450,1800,450,650,450,650,450,650,450,650,400,700,400,700,450,650,400,700,450,650,400,700,400,700,400,700,400,700,450,1750,400,700,400,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,450,650,400,700,400,700,400,700,450,650,450,650,400,700,450,650,450,650,400,700,450,650,450,650,400,700,450,650,400,700,450,600,450,700,400,700,400,700,400,700,400,700,400,700,400,700,400,1800,450,650,450,650,400,700,400,700,450,650,450,650,400,700,400,700,450,650,450,650,400,700,400,700,450,650,450,650,450,650,450,600,500,650,450,650,400,700,400,1800,450,650,450,650,450,650,450,650,450,1800,400,700,450},
                  Tempt32[211]={8800,4550,450,1750,500,1750,450,650,450,650,450,650,450,650,450,1750,500,1750,450,1800,400,1800,450,1800,450,650,400,700,400,700,400,1800,450,1750,450,650,450,650,450,650,450,650,450,650,450,1800,450,1750,450,1800,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,400,700,400,700,450,650,400,700,400,700,400,1800,450,650,450,1800,400,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,650,450,1800,400,700,450,650,400,700,400,700,450,650,400,700,400,700,450,650,450,650,400,700,450,650,450,650,400,700,400,700,450,650,400,700,400,700,450,650,400,650,450,650,450,650,450,650,450,650,450,1800,400,700,400,700,400,700,400,700,450,650,450,650,400,700,400,700,400,700,400,700,450,650,400,700,450,650,450,650,450,650,400,700,400,700,450,650,450,650,400,1800,450,650,450,1800,450,650,400,700,400,1800,450,650,400};

void ControlDevice1(int value){
  switch (value) {
      case 0:{
         for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Off + i));
         break;
      }
      case 1:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(On + i));
        break;
      }
      case 16:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt16 + i));
        break;
      }
      case 17:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt17 + i));
        break;
      }
      case 18:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt18 + i));
        break;
      }
      case 19:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt19 + i));
        break;
      }
      case 20:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt20 + i));
        break;
      }
      case 21:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt21 + i));
        break;
      }
      case 22:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt22 + i));
        break;
      }
      case 23:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt23 + i));
        break;
      }
      case 24:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt24 + i));
        break;
      }
      case 25:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt25 + i));
        break;
      }
      case 26:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt26 + i));
        break;
      }
      case 27:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt27 + i));
        break;
      }
      case 28:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt28 + i));
        break;
      }
      case 29:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt29 + i));
        break;
      }
      case 30:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt30 + i));
        break;
      }
      case 31:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt31 + i));
        break;
      }
      case 32:{
        for(int i=0; i<211; i++) rawCodes[i]=int(pgm_read_word(Tempt32 + i));
        break;
      }
   }
  irsend.sendRaw(rawCodes, sizeof(rawCodes), 38);
}
void ControlDevice2(int value){
}
void setup() {
  Serial.begin(115200);
  SPI.begin();
  radio.begin();
  network.begin(90, this_node); //(channel, node address)
  radio.setDataRate(RF24_1MBPS);
}
unsigned long timeStart=0;
void loop() {
      network.update();
      if( (unsigned long) (millis()-timeStart) >=180000){
          DHT.read11(DHT11_PIN);
          rfData[4]=DHT.humidity;
          rfData[5]=DHT.temperature;
          rfData[0]=2;
          reponseHub();
          Serial.println("Update sensor value");
          timeStart=millis();  
      }
      while ( network.available() ) {     // Is there any incoming data? 
            RF24NetworkHeader header;
            network.read(header, &rfData, sizeof(rfData)); // Read the data Received 
            if(rfData[0]==1){         /// saveData, No Reponse
                if(rfData[1]==1){
                    ControlDevice1(rfData[2]);
                }
                else ControlDevice2(rfData[2]);      
                Serial.println(" Hub controlling Devices ");
            }
            else Serial.println("HUB is pinging");    ///No saveData, No Reponse 
    }
}
    
/////Reponse status to Hub
void reponseHub(){
        RF24NetworkHeader header00(master);             // (Address where the data is going)
        bool ok = network.write(header00, &rfData, sizeof(rfData)); // Send the data   
}
